<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head >
	<meta charset="UTF-8" />
	<title>Jobs Listing</title>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
	<link rel="stylesheet" media="all" type="text/css" th:href="@{/css/style.css}" />
</head>
<body>
	<header th:insert="fragments/general.html :: header"> </header>
	<div th:replace="fragments/general.html :: menu"></div>
	<table width="100%" class="center">
		<tr align="center">
			<td width="30%"></td>
			<td align="center" width="40%"><h1 th:if="${not #lists.isEmpty(jobs)}">Jobs Listing</h1></td>
			<td  width="30%"></td>
		</tr>
	</table>
	
		<!-- search bar -->
	<form th:action="@{/job/list}">
	    Search: <input type="text" name="keyword" id="keyword" size="50" th:value="${keyword}" required />
	    &nbsp;
	    <input class="btn btn-success" type="submit" value="Search" />
	    &nbsp;
	    <input class="btn btn-danger"  type="button" value="Clear" id="btnClear" onclick="clearSearch()" />
	    Records per page:
	    <select name="size" onchange="this.form.submit()">
	        <option th:unless="${jobs.size == 1}" value="1">1</option>
	        <option th:if="${jobs.size == 1}" value="1" selected>1</option>
	        <option th:unless="${jobs.size == 3}" value="3">3</option>
	        <option th:if="${jobs.size == 3}" value="3" selected>3</option>
	        <option th:unless="${jobs.size == 5}" value="5">5</option>
	        <option th:if="${jobs.size == 5}" value="5" selected>5</option>
	        <option th:unless="${jobs.size == 10}" value="10">10</option>
	        <option th:if="${jobs.size == 10}" value="10" selected>10</option>
	        <option th:unless="${jobs.size == 15}" value="15">15</option>
	        <option th:if="${jobs.size == 15}" value="15" selected>15</option>
	    </select>
	</form>
	<!-- Clear fields -->
	<script type="text/javascript">
    function clearSearch() {
        window.location = "[[@{/job/list}]]";
    }
	</script>

<table class="table table-striped table-hover" th:if="${not #lists.isEmpty(jobs)}" >
		<thead>
			<tr >
				<th>Job ID</th>
				<th>Company Name</th>
				<th>Job Title</th>
				<th>Job Description</th>
				<th>Job Skills</th>
				<th>Job Details</th>
	
			</tr>
		</thead>

	
		<tr th:each="job:${jobs}" class="table-row">
			<td th:text=${job.id+1}>Id</td>
			<td th:text=${job.companyName}>Name</td>
			<td th:text=${job.jobTitle}>Title</td>
			<td th:text=${job.jobDesc}>Description</td>
			<td th:text=${job.jobSkills}>Skills</td>
			<td ><a th:href="@{${job.jobAppUrl}}">Link</a></td>
		</tr>
	</table>
	<div th:if="${jobs.totalPages > 0}" class="pagination" th:each="pageNumber : ${pageNumbers}">
	    <a th:href="@{/job/list(size=${jobs.size}, page=${pageNumber}, keyword=${keyword})}" th:text=${pageNumber}
	        th:class="${pageNumber==jobs.number + 1} ? active"></a>
	</div>
    <br>
	<div th:replace="fragments/general.html :: footer"></div>
</body>
</html>